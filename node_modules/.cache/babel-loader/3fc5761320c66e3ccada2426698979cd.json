{"ast":null,"code":"var _jsxFileName = \"/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/components/GoogleCalendar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\";\nimport { Tooltip } from \"bootstrap\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet tooltipInstance = null; // import { Toolti/p } from \"bootstrap\";\n\nconst CLIENT_ID = \"800666244265-lto1ep2f97vs2ts40omitb1ko1ckjq8v.apps.googleusercontent.com\";\nconst API_KEY = \"AIzaSyCfAHxZMKrG-t6CBNDfU9DHyXb6fNtL2xw\"; // Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\n\nconst SCOPES = \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\";\n\nconst GoogleCalendar = () => {\n  _s();\n\n  const [login, setLogin] = useState(false);\n  const [events, setEvents] = useState(null);\n  const [eventTitle, setEventTitle] = useState(null);\n  const [eventDesc, setEventDesc] = useState(null);\n  const [modal, setModal] = useState(false);\n  useEffect(() => {\n    async function getData() {\n      //try catch block to handle promises and errors\n      try {\n        const calendarId = 'jaamasad1@gmail.com';\n        const myKey = 'AIzaSyCfAHxZMKrG-t6CBNDfU9DHyXb6fNtL2xw'; //using await and fetch together as two standard ES6 client side features to extract the data\n\n        let apiCall = await fetch('https://www.googleapis.com/calendar/v3/calendars/' + calendarId + '/events?key=' + myKey); //response.json() is a method on the Response object that lets you extract a JSON object from the response\n        //response.json() returns a promise resolved to a JSON object\n\n        let apiResponse = await apiCall.json();\n        return apiResponse;\n        console.log(apiResponse);\n      } catch (error) {\n        console.log(error);\n      }\n\n      console.log(apiResponse);\n    }\n\n    getData(); // Update the document title using the browser API\n    // const script = document.createElement(\"script\")\n    // script.async = true\n    // script.defer = true\n    // script.src = \"https://apis.google.com/js/api.js\"\n    // document.body.appendChild(script)\n    // script.addEventListener(\"load\", () => {\n    //   if (window.gapi) handleClientLoad()\n    // })\n  });\n\n  const signin = () => {\n    setLogin(true);\n  };\n\n  const openSignInPopup = () => {\n    window.gapi.auth2.authorize({\n      client_id: CLIENT_ID,\n      scope: SCOPES\n    }, res => {\n      console.log(res);\n\n      if (res) {\n        console.log(window.gapi.client, res);\n        if (res.access_token) localStorage.setItem(\"access_token\", res.access_token);\n        fetch(`https://www.googleapis.com/calendar/v3/users/me/calendarList?access_token=${res.access_token}`).then(res => res.json()).then(data => localStorage.setItem(\"calendarId\", data.items[0].id));\n      }\n    });\n  };\n\n  const handleClientLoad = () => {\n    window.gapi.load(\"client:auth2\", initClient);\n  };\n\n  const initClient = () => {\n    if (!localStorage.getItem(\"access_token\")) {\n      openSignInPopup();\n    } else {\n      fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&orderBy=startTime&singleEvents=true`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        }\n      }).then(res => {\n        if (res.status !== 401) {\n          return res.json();\n        } else {\n          localStorage.removeItem(\"access_token\");\n          openSignInPopup();\n        }\n      }).then(data => {\n        if (data === null || data === void 0 ? void 0 : data.items) {\n          // console.log(\"my data\",data.items);\n          setEvents(formatEvents(data.items));\n        }\n      });\n    }\n  };\n  /**\n   * Print the summary and start datetime/date of the next ten events in\n   * the authorized user's calendar. If no events are found an\n   * appropriate message is printed.\n   */\n\n\n  const listUpcomingEvents = () => {\n    window.gapi.client.calendar.events.list({\n      calendarId: \"primary\",\n      // timeMin: new Date().toISOString(),\n      showDeleted: true,\n      singleEvents: true // maxResults: 10,\n      // orderBy: \"startTime\",\n\n    }).then(function (response) {\n      var events = response.result.items; // console.log(events)\n\n      if (events.length > 0) {\n        setEvents(formatEvents(events));\n        console.log(events);\n      }\n    });\n  };\n\n  const formatEvents = list => {\n    return list.map(item => ({\n      title: item.summary,\n      disc: item.description,\n      start: item.start.dateTime || item.start.date,\n      end: item.end.dateTime || item.end.date\n    }));\n  };\n\n  const addEvent = () => {\n    if (window.gapi.client || localStorage.getItem(\"access_token\")) {\n      let today = new Date();\n      var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]; // let dateStr = prompt('Enter a start date ');\n\n      var dateStr = prompt(\"Please enter date.\", today.getDate() + \"-\" + monthNames[today.getMonth()] + \"-\" + today.getFullYear());\n      let dateEnd = prompt(\"Enter a end date\");\n      let title = prompt(\"Enter title\");\n      let description = prompt(\"Enter disc\");\n      fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&timeMax=${new Date(\"Apr 01, 2021\").toISOString()}&timeMin=${new Date(\"Apr 01, 2021\").toISOString()}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        }\n      }).then(res => res.json()).then(data => console.log(data));\n      fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        },\n        body: JSON.stringify({\n          end: {\n            dateTime: new Date(dateEnd)\n          },\n          start: {\n            dateTime: new Date(dateStr)\n          },\n          summary: title,\n          description: description\n        })\n      });\n    }\n  };\n\n  const handelCancel = () => {\n    setModal(false);\n  };\n\n  const handleEventClick = ({\n    event,\n    el\n  }) => {\n    setModal(true);\n    setEventTitle(event._def.title);\n    setEventDesc(event._def.extendedProps.disc);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calander-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-container\",\n      children: [login && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addEvent,\n        children: \"Add event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), !login && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: signin,\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FullCalendar, {\n      plugins: [dayGridPlugin, googleCalendarPlugin],\n      initialView: \"dayGridMonth\",\n      events: events,\n      GoogleCalendarApikey: API_KEY,\n      eventClick: handleEventClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modal,\n      className: \"Eventmodel\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"secondary\",\n        onClick: handelCancel,\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 33\n        }, this), eventTitle]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Description:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 42\n            }, this), eventDesc ? eventDesc : \"this event has no summary\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n};\n\n_s(GoogleCalendar, \"CbDpC+whHUcVwjaEpMOasOh+03Y=\");\n\n_c = GoogleCalendar;\nexport default GoogleCalendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleCalendar\");","map":{"version":3,"sources":["/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/components/GoogleCalendar.js"],"names":["React","useEffect","useState","FullCalendar","dayGridPlugin","googleCalendarPlugin","Tooltip","Button","Modal","ModalHeader","ModalBody","ModalFooter","tooltipInstance","CLIENT_ID","API_KEY","SCOPES","GoogleCalendar","login","setLogin","events","setEvents","eventTitle","setEventTitle","eventDesc","setEventDesc","modal","setModal","getData","calendarId","myKey","apiCall","fetch","apiResponse","json","console","log","error","signin","openSignInPopup","window","gapi","auth2","authorize","client_id","scope","res","client","access_token","localStorage","setItem","then","data","items","id","handleClientLoad","load","initClient","getItem","headers","Authorization","status","removeItem","formatEvents","listUpcomingEvents","calendar","list","showDeleted","singleEvents","response","result","length","map","item","title","summary","disc","description","start","dateTime","date","end","addEvent","today","Date","monthNames","dateStr","prompt","getDate","getMonth","getFullYear","dateEnd","toISOString","method","body","JSON","stringify","handelCancel","handleEventClick","event","el","_def","extendedProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,oBAAP,MAAiC,+BAAjC;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,WAAxB,EAAqCC,SAArC,EAAgDC,WAAhD,QAAmE,YAAnE;;AAEA,IAAIC,eAAe,GAAG,IAAtB,C,CACA;;AAEA,MAAMC,SAAS,GACb,0EADF;AAEA,MAAMC,OAAO,GAAG,yCAAhB,C,CAEA;AACA;;AACA,MAAMC,MAAM,GACV,2LADF;;AAGA,MAAMC,cAAc,GAAG,MAAM;AAAA;;AAC3B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACiB,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAACmB,UAAD,EAAaC,aAAb,IAA8BpB,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACqB,SAAD,EAAYC,YAAZ,IAA4BtB,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACuB,KAAD,EAAQC,QAAR,IAAoBxB,QAAQ,CAAC,KAAD,CAAlC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AAEd,mBAAe0B,OAAf,GAA0B;AACxB;AACA,UAAI;AACA,cAAMC,UAAU,GAAG,qBAAnB;AACA,cAAMC,KAAK,GAAG,yCAAd,CAFA,CAGA;;AACA,YAAIC,OAAO,GAAG,MAAMC,KAAK,CAAC,sDAAsDH,UAAtD,GAAkE,cAAlE,GAAmFC,KAApF,CAAzB,CAJA,CAKA;AACA;;AACA,YAAIG,WAAW,GAAG,MAAMF,OAAO,CAACG,IAAR,EAAxB;AACA,eAAOD,WAAP;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AACH,OAVD,CAUE,OAAOI,KAAP,EAAc;AACZF,QAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACH;;AACLF,MAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AAEC;;AACDL,IAAAA,OAAO,GApBS,CAsBd;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACD,GAjCQ,CAAT;;AAkCA,QAAMU,MAAM,GAAG,MAAM;AACnBnB,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,GAFD;;AAIA,QAAMoB,eAAe,GAAG,MAAM;AAC5BC,IAAAA,MAAM,CAACC,IAAP,CAAYC,KAAZ,CAAkBC,SAAlB,CACE;AAAEC,MAAAA,SAAS,EAAE9B,SAAb;AAAwB+B,MAAAA,KAAK,EAAE7B;AAA/B,KADF,EAEG8B,GAAD,IAAS;AACPX,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;;AACA,UAAIA,GAAJ,EAAS;AACPX,QAAAA,OAAO,CAACC,GAAR,CAAYI,MAAM,CAACC,IAAP,CAAYM,MAAxB,EAAgCD,GAAhC;AAEA,YAAIA,GAAG,CAACE,YAAR,EACEC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCJ,GAAG,CAACE,YAAzC;AACFhB,QAAAA,KAAK,CACF,6EAA4Ec,GAAG,CAACE,YAAa,EAD3F,CAAL,CAGGG,IAHH,CAGSL,GAAD,IAASA,GAAG,CAACZ,IAAJ,EAHjB,EAIGiB,IAJH,CAISC,IAAD,IACJH,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCE,IAAI,CAACC,KAAL,CAAW,CAAX,EAAcC,EAAjD,CALJ;AAQD;AACF,KAlBH;AAoBD,GArBD;;AAwBA,QAAMC,gBAAgB,GAAG,MAAM;AAC7Bf,IAAAA,MAAM,CAACC,IAAP,CAAYe,IAAZ,CAAiB,cAAjB,EAAiCC,UAAjC;AACD,GAFD;;AAIA,QAAMA,UAAU,GAAG,MAAM;AACvB,QAAI,CAACR,YAAY,CAACS,OAAb,CAAqB,cAArB,CAAL,EAA2C;AACzCnB,MAAAA,eAAe;AAChB,KAFD,MAEO;AACLP,MAAAA,KAAK,CACF,uEAAsEjB,OAAQ,sCAD5E,EAEH;AACE4C,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASX,YAAY,CAACS,OAAb,CAAqB,cAArB,CAAqC;AADvD;AADX,OAFG,CAAL,CAQGP,IARH,CAQSL,GAAD,IAAS;AACb,YAAIA,GAAG,CAACe,MAAJ,KAAe,GAAnB,EAAwB;AACtB,iBAAOf,GAAG,CAACZ,IAAJ,EAAP;AACD,SAFD,MAEO;AACLe,UAAAA,YAAY,CAACa,UAAb,CAAwB,cAAxB;AAEAvB,UAAAA,eAAe;AAChB;AACF,OAhBH,EAiBGY,IAjBH,CAiBSC,IAAD,IAAU;AACd,YAAIA,IAAJ,aAAIA,IAAJ,uBAAIA,IAAI,CAAEC,KAAV,EAAiB;AACf;AACAhC,UAAAA,SAAS,CAAC0C,YAAY,CAACX,IAAI,CAACC,KAAN,CAAb,CAAT;AACD;AACF,OAtBH;AAuBD;AACF,GA5BD;AA8BA;AACF;AACA;AACA;AACA;;;AACE,QAAMW,kBAAkB,GAAG,MAAM;AAC/BxB,IAAAA,MAAM,CAACC,IAAP,CAAYM,MAAZ,CAAmBkB,QAAnB,CAA4B7C,MAA5B,CACG8C,IADH,CACQ;AACJrC,MAAAA,UAAU,EAAE,SADR;AAEJ;AACAsC,MAAAA,WAAW,EAAE,IAHT;AAIJC,MAAAA,YAAY,EAAE,IAJV,CAKJ;AACA;;AANI,KADR,EASGjB,IATH,CASQ,UAAUkB,QAAV,EAAoB;AACxB,UAAIjD,MAAM,GAAGiD,QAAQ,CAACC,MAAT,CAAgBjB,KAA7B,CADwB,CAGxB;;AAEA,UAAIjC,MAAM,CAACmD,MAAP,GAAgB,CAApB,EAAuB;AACrBlD,QAAAA,SAAS,CAAC0C,YAAY,CAAC3C,MAAD,CAAb,CAAT;AACAe,QAAAA,OAAO,CAACC,GAAR,CAAYhB,MAAZ;AACD;AACF,KAlBH;AAmBD,GApBD;;AAuBA,QAAM2C,YAAY,GAAIG,IAAD,IAAU;AAC7B,WAAOA,IAAI,CAACM,GAAL,CAAUC,IAAD,KAAW;AACzBC,MAAAA,KAAK,EAAED,IAAI,CAACE,OADa;AAEzBC,MAAAA,IAAI,EAAEH,IAAI,CAACI,WAFc;AAGzBC,MAAAA,KAAK,EAAEL,IAAI,CAACK,KAAL,CAAWC,QAAX,IAAuBN,IAAI,CAACK,KAAL,CAAWE,IAHhB;AAIzBC,MAAAA,GAAG,EAAER,IAAI,CAACQ,GAAL,CAASF,QAAT,IAAqBN,IAAI,CAACQ,GAAL,CAASD;AAJV,KAAX,CAAT,CAAP;AAMD,GAPD;;AAUA,QAAME,QAAQ,GAAG,MAAM;AACrB,QAAI1C,MAAM,CAACC,IAAP,CAAYM,MAAZ,IAAsBE,YAAY,CAACS,OAAb,CAAqB,cAArB,CAA1B,EAAgE;AAC9D,UAAIyB,KAAK,GAAG,IAAIC,IAAJ,EAAZ;AACA,UAAIC,UAAU,GAAG,CACf,SADe,EAEf,UAFe,EAGf,OAHe,EAIf,OAJe,EAKf,KALe,EAMf,MANe,EAOf,MAPe,EAQf,QARe,EASf,WATe,EAUf,SAVe,EAWf,UAXe,EAYf,UAZe,CAAjB,CAF8D,CAgB9D;;AACA,UAAIC,OAAO,GAAGC,MAAM,CAClB,oBADkB,EAElBJ,KAAK,CAACK,OAAN,KACE,GADF,GAEEH,UAAU,CAACF,KAAK,CAACM,QAAN,EAAD,CAFZ,GAGE,GAHF,GAIEN,KAAK,CAACO,WAAN,EANgB,CAApB;AAQA,UAAIC,OAAO,GAAGJ,MAAM,CAAC,kBAAD,CAApB;AACA,UAAIb,KAAK,GAAGa,MAAM,CAAC,aAAD,CAAlB;AACA,UAAIV,WAAW,GAAGU,MAAM,CAAC,YAAD,CAAxB;AACAvD,MAAAA,KAAK,CACF,uEAAsEjB,OAAQ,YAAW,IAAIqE,IAAJ,CACxF,cADwF,EAExFQ,WAFwF,EAE1E,YAAW,IAAIR,IAAJ,CAAS,cAAT,EAAyBQ,WAAzB,EAAuC,EAH/D,EAIH;AACEjC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASX,YAAY,CAACS,OAAb,CAAqB,cAArB,CAAqC;AADvD;AADX,OAJG,CAAL,CAUGP,IAVH,CAUSL,GAAD,IAASA,GAAG,CAACZ,IAAJ,EAVjB,EAWGiB,IAXH,CAWSC,IAAD,IAAUjB,OAAO,CAACC,GAAR,CAAYgB,IAAZ,CAXlB;AAYApB,MAAAA,KAAK,CACF,uEAAsEjB,OAAQ,EAD5E,EAEH;AACE8E,QAAAA,MAAM,EAAE,MADV;AAEElC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASX,YAAY,CAACS,OAAb,CAAqB,cAArB,CAAqC;AADvD,SAFX;AAKEoC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBf,UAAAA,GAAG,EAAE;AACHF,YAAAA,QAAQ,EAAE,IAAIK,IAAJ,CAASO,OAAT;AADP,WADc;AAInBb,UAAAA,KAAK,EAAE;AACLC,YAAAA,QAAQ,EAAE,IAAIK,IAAJ,CAASE,OAAT;AADL,WAJY;AAOnBX,UAAAA,OAAO,EAAED,KAPU;AAQnBG,UAAAA,WAAW,EAAEA;AARM,SAAf;AALR,OAFG,CAAL;AAmBD;AACF,GA7DD;;AA+DA,QAAMoB,YAAY,GAAG,MAAM;AACzBtE,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,GAFD;;AAIA,QAAMuE,gBAAgB,GAAG,CAAC;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAD,KAAmB;AAC1CzE,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAJ,IAAAA,aAAa,CAAC4E,KAAK,CAACE,IAAN,CAAW3B,KAAZ,CAAb;AACAjD,IAAAA,YAAY,CAAC0E,KAAK,CAACE,IAAN,CAAWC,aAAX,CAAyB1B,IAA1B,CAAZ;AACD,GAJD;;AAMA,sBACE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA,iBACC1D,KAAK,iBAAI;AAAQ,QAAA,OAAO,EAAEgE,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADV,EAEC,CAAChE,KAAD,iBAAU;AAAQ,QAAA,OAAO,EAAEoB,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFX;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE,QAAC,YAAD;AACE,MAAA,OAAO,EAAE,CAACjC,aAAD,EAAgBC,oBAAhB,CADX;AAEE,MAAA,WAAW,EAAC,cAFd;AAGE,MAAA,MAAM,EAAEc,MAHV;AAIE,MAAA,oBAAoB,EAAEL,OAJxB;AAKE,MAAA,UAAU,EAAEmF;AALd;AAAA;AAAA;AAAA;AAAA,YALF,eAYE,QAAC,KAAD;AACE,MAAA,MAAM,EAAExE,KADV;AAEE,MAAA,SAAS,EAAC,YAFZ;AAAA,8BAIE,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,WAAd;AAA0B,QAAA,OAAO,EAAEuE,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAOM,QAAC,WAAD;AAAA,gCACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADC,eACoB;AAAA;AAAA;AAAA;AAAA,gBADpB,EAEC3E,UAFD;AAAA;AAAA;AAAA;AAAA;AAAA,cAPN,eAWI,QAAC,SAAD;AAAA,+BACE;AAAA,iCACE;AAAA,oCACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAC2B;AAAA;AAAA;AAAA;AAAA,oBAD3B,EAGCE,SAAS,GAAGA,SAAH,GAAc,2BAHxB;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAZF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoCD,CA1PD;;GAAMP,c;;KAAAA,c;AA4PN,eAAeA,cAAf","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport FullCalendar from \"@fullcalendar/react\"\nimport dayGridPlugin from \"@fullcalendar/daygrid\"\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\"\nimport { Tooltip } from \"bootstrap\"\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\"\n\nlet tooltipInstance = null\n// import { Toolti/p } from \"bootstrap\";\n\nconst CLIENT_ID =\n  \"800666244265-lto1ep2f97vs2ts40omitb1ko1ckjq8v.apps.googleusercontent.com\"\nconst API_KEY = \"AIzaSyCfAHxZMKrG-t6CBNDfU9DHyXb6fNtL2xw\"\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nconst SCOPES =\n  \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\"\n\nconst GoogleCalendar = () => {\n  const [login, setLogin] = useState(false)\n  const [events, setEvents] = useState(null)\n  const [eventTitle, setEventTitle] = useState(null)\n  const [eventDesc, setEventDesc] = useState(null)\n  const [modal, setModal] = useState(false)\n\n  useEffect(() => {\n\n    async function getData () {\n      //try catch block to handle promises and errors\n      try {\n          const calendarId = 'jaamasad1@gmail.com'\n          const myKey = 'AIzaSyCfAHxZMKrG-t6CBNDfU9DHyXb6fNtL2xw'\n          //using await and fetch together as two standard ES6 client side features to extract the data\n          let apiCall = await fetch('https://www.googleapis.com/calendar/v3/calendars/' + calendarId+ '/events?key=' + myKey)\n          //response.json() is a method on the Response object that lets you extract a JSON object from the response\n          //response.json() returns a promise resolved to a JSON object\n          let apiResponse = await apiCall.json()\n          return apiResponse\n          console.log(apiResponse)\n      } catch (error) {\n          console.log(error)\n      }\n  console.log(apiResponse)\n\n  }\n  getData()\n\n    // Update the document title using the browser API\n    // const script = document.createElement(\"script\")\n    // script.async = true\n    // script.defer = true\n    // script.src = \"https://apis.google.com/js/api.js\"\n\n    // document.body.appendChild(script)\n\n    // script.addEventListener(\"load\", () => {\n    //   if (window.gapi) handleClientLoad()\n    // })\n  })\n  const signin = () => {\n    setLogin(true)\n  }\n\n  const openSignInPopup = () => {\n    window.gapi.auth2.authorize(\n      { client_id: CLIENT_ID, scope: SCOPES },\n      (res) => {\n        console.log(res)\n        if (res) {\n          console.log(window.gapi.client, res)\n\n          if (res.access_token)\n            localStorage.setItem(\"access_token\", res.access_token)\n          fetch(\n            `https://www.googleapis.com/calendar/v3/users/me/calendarList?access_token=${res.access_token}`\n          )\n            .then((res) => res.json())\n            .then((data) =>\n              localStorage.setItem(\"calendarId\", data.items[0].id)\n            )\n\n        }\n      }\n    )\n  }\n\n  \n  const handleClientLoad = () => {\n    window.gapi.load(\"client:auth2\", initClient)\n  }\n\n  const initClient = () => {\n    if (!localStorage.getItem(\"access_token\")) {\n      openSignInPopup()\n    } else {\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&orderBy=startTime&singleEvents=true`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n        }\n      )\n        .then((res) => {\n          if (res.status !== 401) {\n            return res.json()\n          } else {\n            localStorage.removeItem(\"access_token\")\n\n            openSignInPopup()\n          }\n        })\n        .then((data) => {\n          if (data?.items) {\n            // console.log(\"my data\",data.items);\n            setEvents(formatEvents(data.items))\n          }\n        })\n    }\n  }\n\n  /**\n   * Print the summary and start datetime/date of the next ten events in\n   * the authorized user's calendar. If no events are found an\n   * appropriate message is printed.\n   */\n  const listUpcomingEvents = () => {\n    window.gapi.client.calendar.events\n      .list({\n        calendarId: \"primary\",\n        // timeMin: new Date().toISOString(),\n        showDeleted: true,\n        singleEvents: true,\n        // maxResults: 10,\n        // orderBy: \"startTime\",\n      })\n      .then(function (response) {\n        var events = response.result.items\n\n        // console.log(events)\n\n        if (events.length > 0) {\n          setEvents(formatEvents(events))\n          console.log(events)\n        }\n      })\n  }\n\n\n  const formatEvents = (list) => {\n    return list.map((item) => ({\n      title: item.summary,\n      disc: item.description,\n      start: item.start.dateTime || item.start.date,\n      end: item.end.dateTime || item.end.date,\n    }))\n  }\n\n\n  const addEvent = () => {\n    if (window.gapi.client || localStorage.getItem(\"access_token\")) {\n      let today = new Date()\n      var monthNames = [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\",\n      ]\n      // let dateStr = prompt('Enter a start date ');\n      var dateStr = prompt(\n        \"Please enter date.\",\n        today.getDate() +\n          \"-\" +\n          monthNames[today.getMonth()] +\n          \"-\" +\n          today.getFullYear()\n      )\n      let dateEnd = prompt(\"Enter a end date\")\n      let title = prompt(\"Enter title\")\n      let description = prompt(\"Enter disc\")\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&timeMax=${new Date(\n          \"Apr 01, 2021\"\n        ).toISOString()}&timeMin=${new Date(\"Apr 01, 2021\").toISOString()}`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((data) => console.log(data))\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n          body: JSON.stringify({\n            end: {\n              dateTime: new Date(dateEnd),\n            },\n            start: {\n              dateTime: new Date(dateStr),\n            },\n            summary: title,\n            description: description,\n          }),\n        }\n      )\n    }\n  }\n\n  const handelCancel = () => {\n    setModal(false)\n  }\n\n  const handleEventClick = ({ event, el }) => {\n    setModal(true)\n    setEventTitle(event._def.title)\n    setEventDesc(event._def.extendedProps.disc)\n  }\n\n  return (\n    <div className=\"calander-container\">\n      <div className=\"button-container\">\n      {login && <button onClick={addEvent}>Add event</button>}\n      {!login && <button onClick={signin}>Sign In</button>}\n      </div>\n      <FullCalendar\n        plugins={[dayGridPlugin, googleCalendarPlugin]}\n        initialView=\"dayGridMonth\"\n        events={events}\n        GoogleCalendarApikey={API_KEY}\n        eventClick={handleEventClick}\n      />\n      <Modal\n        isOpen={modal}\n        className=\"Eventmodel\"\n      >\n        <Button color=\"secondary\" onClick={handelCancel}>\n              X\n            </Button>\n            <ModalHeader>\n           <label>Title:</label><br />\n            {eventTitle}\n          </ModalHeader>\n          <ModalBody>\n            <div>\n              <p>\n              <label>Description:</label><br />  \n\n              {eventDesc ? eventDesc :\"this event has no summary\"}\n              </p>\n            </div>\n          </ModalBody>\n      </Modal>\n    </div>\n  )\n}\n\nexport default GoogleCalendar\n"]},"metadata":{},"sourceType":"module"}