{"ast":null,"code":"var _jsxFileName = \"/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/components/GoogleCalendar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\";\nimport $ from \"jquery\"; // import { Button, Modal, ModalHeader, ModalBody } from \"reactstrap\"\n\nimport Modal from \"react-modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = \"592443710560-iv53i6i8n8q1q9v53tat6qg4dmps3knp.apps.googleusercontent.com\";\nconst API_KEY = \"AIzaSyABMZUitJ-kKdMQg5u-gg5RcBRjeNrv4tU\";\nconst SCOPES = \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\";\n\nconst GoogleCalendar = () => {\n  _s();\n\n  const [login, setLogin] = useState(false);\n  const [events, setEvents] = useState(null);\n  const [eventTitle, setEventTitle] = useState(null);\n  const [eventDesc, setEventDesc] = useState(null);\n  const [eventStartTime, setEventStartTime] = useState(null);\n  const [eventEndTime, setEventEndTime] = useState(null);\n  const [modal, setModal] = useState(false);\n  const [addEventModal, setAddEventModal] = useState(false);\n  const [newEvent, setNewEvent] = useState({\n    title: \"\",\n    description: \"\",\n    startDate: \"\",\n    endDate: \"\"\n  });\n\n  const handleEventChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewEvent({ ...newEvent,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"access_token\")) setLogin(true);\n    var calendarid = \"jamkhawar03027867415@gmail.com\";\n    $.ajax({\n      type: \"GET\",\n      url: encodeURI(\"https://www.googleapis.com/calendar/v3/calendars/\" + calendarid + \"/events?key=\" + API_KEY),\n      dataType: \"json\",\n      success: function (response) {\n        setEvents(formatEvents(response.items)); // console.log(events)\n      },\n      error: function (response) {}\n    });\n  });\n\n  const signin = () => {\n    setLogin(true);\n    const script = document.createElement(\"script\");\n    script.async = true;\n    script.defer = true;\n    script.src = \"https://apis.google.com/js/api.js\";\n    document.body.appendChild(script);\n    script.addEventListener(\"load\", () => {\n      if (window.gapi) handleClientLoad();\n    });\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"access_token\");\n    setLogin(false);\n  };\n\n  const openSignInPopup = () => {\n    window.gapi.auth2.authorize({\n      client_id: CLIENT_ID,\n      scope: SCOPES\n    }, res => {\n      if (res) {\n        console.log(window.gapi.client, res);\n        if (res.access_token) localStorage.setItem(\"access_token\", res.access_token);\n        fetch(`https://www.googleapis.com/calendar/v3/users/me/calendarList?access_token=${res.access_token}`).then(res => res.json()).then(data => localStorage.setItem(\"calendarId\", data.items[0].id));\n      }\n    });\n  };\n\n  const handleClientLoad = () => {\n    window.gapi.load(\"client:auth2\", initClient);\n  };\n\n  const initClient = () => {\n    if (!localStorage.getItem(\"access_token\")) {\n      openSignInPopup();\n    } else {\n      fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&orderBy=startTime&singleEvents=true`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        }\n      }).then(res => {\n        if (res.status !== 401) {\n          return res.json();\n        } else {\n          localStorage.removeItem(\"access_token\");\n          openSignInPopup();\n        }\n      }).then(data => {\n        if (data === null || data === void 0 ? void 0 : data.items) {\n          setEvents(formatEvents(data.items));\n        }\n      });\n    }\n  };\n\n  const listUpcomingEvents = () => {\n    window.gapi.client.calendar.events.list({\n      calendarId: \"primary\",\n      showDeleted: true,\n      singleEvents: true\n    }).then(function (response) {\n      var events = response.result.items;\n\n      if (events.length > 0) {\n        setEvents(formatEvents(events));\n      }\n    });\n  };\n\n  const formatEvents = list => {\n    return list.map(item => ({\n      title: item.summary,\n      disc: item.description,\n      start: item.start.dateTime || item.start.date,\n      end: item.end.dateTime || item.end.date\n    }));\n  };\n\n  const addEvent = () => {\n    if (window.gapi.client || localStorage.getItem(\"access_token\")) {\n      fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&timeMax=${new Date(\"Apr 01, 2021\").toISOString()}&timeMin=${new Date(\"Apr 01, 2021\").toISOString()}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        }\n      }).then(res => res.json()).then(data => console.log(data));\n      fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`\n        },\n        body: JSON.stringify({\n          end: {\n            dateTime: new Date(newEvent.endDate)\n          },\n          start: {\n            dateTime: new Date(newEvent.startDate)\n          },\n          summary: newEvent.title,\n          description: newEvent.description\n        })\n      });\n      setAddEventModal(false);\n    }\n  };\n\n  const handelCancel = () => {\n    setModal(false);\n  };\n\n  const handleEventClick = ({\n    event,\n    el\n  }) => {\n    setModal(true);\n    console.log(event._context.options.events.title);\n    setEventTitle(event.title);\n    setEventDesc(event.disc);\n    setEventStartTime(event.start);\n    setEventEndTime(event.end);\n  }; // const toggleModal = () => {\n  //   setModal(!modal)\n  //   setAddEventModal(!addEventModal)\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calander-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-container\",\n      children: [login && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAddEventModal(true),\n        children: \"Add event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), !login ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: signin,\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FullCalendar, {\n      plugins: [dayGridPlugin, googleCalendarPlugin],\n      initialView: \"dayGridMonth\",\n      events: events,\n      GoogleCalendarApikey: API_KEY,\n      eventClick: handleEventClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: addEventModal,\n      contentLabel: \"My dialog\",\n      className: \"mymodal\",\n      overlayClassName: \"myoverlay-event\",\n      closeTimeoutMS: 500,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"title\",\n              value: newEvent.title,\n              onChange: handleEventChange,\n              placeholder: \"Enter Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Enter Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"description\",\n              value: newEvent.description,\n              placeholder: \"Enter Descrition\",\n              onChange: handleEventChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"date-input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"\",\n              children: \"Enter Start Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"datetime-local\",\n              name: \"startDate\",\n              value: newEvent.startDate,\n              placeholder: \"start date\",\n              onChange: handleEventChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"\",\n              children: \"Enter End Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"datetime-local\",\n              name: \"endDate\",\n              value: newEvent.endDate,\n              placeholder: \"end date\",\n              onChange: handleEventChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup-button-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: addEvent,\n            children: \"Add Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAddEventModal(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modal,\n      contentLabel: \"My dialog\",\n      className: \"mymodal\",\n      overlayClassName: \"myoverlay\",\n      closeTimeoutMS: 500,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Event Title:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 11\n      }, this), eventTitle, /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Event Description:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this), eventDesc ? eventDesc : \"this event has no summary\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Event Start Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, this), eventStartTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Event End Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), eventEndTime]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handelCancel,\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n\n_s(GoogleCalendar, \"8c/42g1u0bGuGFx7ji0FkZdxfQk=\");\n\n_c = GoogleCalendar;\nexport default GoogleCalendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleCalendar\");","map":{"version":3,"sources":["/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/components/GoogleCalendar.js"],"names":["React","useEffect","useState","FullCalendar","dayGridPlugin","googleCalendarPlugin","$","Modal","CLIENT_ID","API_KEY","SCOPES","GoogleCalendar","login","setLogin","events","setEvents","eventTitle","setEventTitle","eventDesc","setEventDesc","eventStartTime","setEventStartTime","eventEndTime","setEventEndTime","modal","setModal","addEventModal","setAddEventModal","newEvent","setNewEvent","title","description","startDate","endDate","handleEventChange","e","name","value","target","localStorage","getItem","calendarid","ajax","type","url","encodeURI","dataType","success","response","formatEvents","items","error","signin","script","document","createElement","async","defer","src","body","appendChild","addEventListener","window","gapi","handleClientLoad","logout","removeItem","openSignInPopup","auth2","authorize","client_id","scope","res","console","log","client","access_token","setItem","fetch","then","json","data","id","load","initClient","headers","Authorization","status","listUpcomingEvents","calendar","list","calendarId","showDeleted","singleEvents","result","length","map","item","summary","disc","start","dateTime","date","end","addEvent","Date","toISOString","method","JSON","stringify","handelCancel","handleEventClick","event","el","_context","options"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport FullCalendar from \"@fullcalendar/react\"\nimport dayGridPlugin from \"@fullcalendar/daygrid\"\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\"\nimport $ from \"jquery\"\n// import { Button, Modal, ModalHeader, ModalBody } from \"reactstrap\"\nimport Modal from \"react-modal\"\n\nconst CLIENT_ID =\n  \"592443710560-iv53i6i8n8q1q9v53tat6qg4dmps3knp.apps.googleusercontent.com\"\nconst API_KEY = \"AIzaSyABMZUitJ-kKdMQg5u-gg5RcBRjeNrv4tU\"\nconst SCOPES =\n  \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\"\n\nconst GoogleCalendar = () => {\n  const [login, setLogin] = useState(false)\n  const [events, setEvents] = useState(null)\n  const [eventTitle, setEventTitle] = useState(null)\n  const [eventDesc, setEventDesc] = useState(null)\n  const [eventStartTime, setEventStartTime] = useState(null)\n  const [eventEndTime, setEventEndTime] = useState(null)\n  \n  const [modal, setModal] = useState(false)\n  const [addEventModal, setAddEventModal] = useState(false)\n  const [newEvent, setNewEvent] = useState({\n    title: \"\",\n    description: \"\",\n    startDate: \"\",\n    endDate: \"\",\n  })\n\n  const handleEventChange = (e) => {\n    const { name, value } = e.target\n    setNewEvent({\n      ...newEvent,\n      [name]: value,\n    })\n  }\n\n  useEffect(() => {\n    if (localStorage.getItem(\"access_token\")) setLogin(true)\n    var calendarid = \"jamkhawar03027867415@gmail.com\"\n\n    $.ajax({\n      type: \"GET\",\n      url: encodeURI(\n        \"https://www.googleapis.com/calendar/v3/calendars/\" +\n          calendarid +\n          \"/events?key=\" +\n          API_KEY\n      ),\n      dataType: \"json\",\n      success: function (response) {\n        setEvents(formatEvents(response.items))\n        // console.log(events)\n      },\n\n      error: function (response) {},\n    })\n  })\n\n  const signin = () => {\n    setLogin(true)\n    const script = document.createElement(\"script\")\n    script.async = true\n    script.defer = true\n    script.src = \"https://apis.google.com/js/api.js\"\n\n    document.body.appendChild(script)\n\n    script.addEventListener(\"load\", () => {\n      if (window.gapi) handleClientLoad()\n    })\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"access_token\")\n    setLogin(false)\n  }\n\n  const openSignInPopup = () => {\n    window.gapi.auth2.authorize(\n      { client_id: CLIENT_ID, scope: SCOPES },\n      (res) => {\n        if (res) {\n          console.log(window.gapi.client, res)\n\n          if (res.access_token)\n            localStorage.setItem(\"access_token\", res.access_token)\n          fetch(\n            `https://www.googleapis.com/calendar/v3/users/me/calendarList?access_token=${res.access_token}`\n          )\n            .then((res) => res.json())\n            .then((data) =>\n              localStorage.setItem(\"calendarId\", data.items[0].id)\n            )\n        }\n      }\n    )\n  }\n\n  const handleClientLoad = () => {\n    window.gapi.load(\"client:auth2\", initClient)\n  }\n  const initClient = () => {\n    if (!localStorage.getItem(\"access_token\")) {\n      openSignInPopup()\n    } else {\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&orderBy=startTime&singleEvents=true`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n        }\n      )\n        .then((res) => {\n          if (res.status !== 401) {\n            return res.json()\n          } else {\n            localStorage.removeItem(\"access_token\")\n\n            openSignInPopup()\n          }\n        })\n        .then((data) => {\n          if (data?.items) {\n            setEvents(formatEvents(data.items))\n          }\n        })\n    }\n  }\n\n  const listUpcomingEvents = () => {\n    window.gapi.client.calendar.events\n      .list({\n        calendarId: \"primary\",\n        showDeleted: true,\n        singleEvents: true,\n      })\n      .then(function (response) {\n        var events = response.result.items\n        if (events.length > 0) {\n          setEvents(formatEvents(events))\n        }\n      })\n  }\n\n  const formatEvents = (list) => {\n    return list.map((item) => ({\n      title: item.summary,\n      disc: item.description,\n      start: item.start.dateTime || item.start.date,\n      end: item.end.dateTime || item.end.date,\n    }))\n  }\n\n  const addEvent = () => {\n    if (window.gapi.client || localStorage.getItem(\"access_token\")) {\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&timeMax=${new Date(\n          \"Apr 01, 2021\"\n        ).toISOString()}&timeMin=${new Date(\"Apr 01, 2021\").toISOString()}`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((data) => console.log(data))\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n          body: JSON.stringify({\n            end: {\n              dateTime: new Date(newEvent.endDate),\n            },\n            start: {\n              dateTime: new Date(newEvent.startDate),\n            },\n            summary: newEvent.title,\n            description: newEvent.description,\n          }),\n        }\n\n      )\n      setAddEventModal(false)\n    }\n  }\n\n  const handelCancel = () => {\n    setModal(false)\n  }\n\n  const handleEventClick = ({ event, el }) => {\n    setModal(true)\n   ;\n    console.log( event._context.options.events.title)\n\n    setEventTitle(event.title)\n    setEventDesc(event.disc)\n    setEventStartTime(event.start)\n    setEventEndTime(event.end)\n  }\n\n  // const toggleModal = () => {\n  //   setModal(!modal)\n  //   setAddEventModal(!addEventModal)\n  // }\n\n  return (\n    <div className=\"calander-container\">\n      <div className=\"button-container\">\n        {login && (\n          <button onClick={() => setAddEventModal(true)}>Add event</button>\n        )}\n        {!login ? (\n          <button onClick={signin}>Sign In</button>\n        ) : (\n          <button onClick={logout}>Logout</button>\n        )}\n      </div>\n      <FullCalendar\n        plugins={[dayGridPlugin, googleCalendarPlugin]}\n        initialView=\"dayGridMonth\"\n        events={events}\n        GoogleCalendarApikey={API_KEY}\n        eventClick={handleEventClick}\n      />\n      <Modal \n       isOpen={addEventModal}\n       contentLabel=\"My dialog\"\n       className=\"mymodal\"\n       overlayClassName=\"myoverlay-event\"\n       closeTimeoutMS={500}\n          >\n       <div>\n            <div className=\"date-input-container\">\n              <div className=\"input-label\">\n                <label>Title</label>\n                <input\n                  type=\"text\"\n                  name=\"title\"\n                  value={newEvent.title}\n                  onChange={handleEventChange}\n                  placeholder=\"Enter Title\"\n                />\n              </div>\n              <div className=\"input-label\">\n                <label>Enter Description</label>\n                <input\n                  type=\"text\"\n                  name=\"description\"\n                  value={newEvent.description}\n                  placeholder=\"Enter Descrition\"\n                  onChange={handleEventChange}\n                />\n              </div>\n            </div>\n            <div className=\"date-input-container\">\n              <div className=\"input-label\">\n                <label htmlFor=\"\">Enter Start Date</label>\n                <input\n                  type=\"datetime-local\"\n                  name=\"startDate\"\n                  value={newEvent.startDate}\n                  placeholder=\"start date\"\n                  onChange={handleEventChange}\n                />\n              </div>\n              <div className=\"input-label\">\n                <label htmlFor=\"\">Enter End Date</label>\n                <input\n                  type=\"datetime-local\"\n                  name=\"endDate\"\n                  value={newEvent.endDate}\n                  placeholder=\"end date\"\n                  onChange={handleEventChange}\n                />\n              </div>\n            </div>\n            <div className=\"popup-button-container\">\n         \n            <button onClick={addEvent}>Add Event</button>\n            <button  onClick={() => setAddEventModal(false)}>Close</button>\n            </div>\n          </div>\n      </Modal>\n\n      <Modal\n        isOpen={modal}\n        contentLabel=\"My dialog\"\n        className=\"mymodal\"\n        overlayClassName=\"myoverlay\"\n        closeTimeoutMS={500}\n      >\n          <label>Event Title:</label>\n          {eventTitle}\n          <div>\n            <p>\n              <label>Event Description:</label>\n              {eventDesc ? eventDesc : \"this event has no summary\"}\n            </p>\n          </div>\n          <div>\n            <p>\n              <label>Event Start Time:</label>\n              {eventStartTime}\n            </p>\n          </div>\n          <div>\n            <p>\n              <label>Event End Time:</label>\n              {eventEndTime}\n            </p>\n          </div>\n          <button  onClick={handelCancel}>\n          X\n        </button>\n       \n      </Modal>\n\n      {/* <Modal isOpen={modal} className=\"Eventmodel\">\n        <Button color=\"secondary\" onClick={handelCancel}>\n          X\n        </Button>\n        <ModalHeader>\n          <label>Title:</label>\n          <br />\n          {eventTitle}\n        </ModalHeader>\n        <ModalBody>\n          <div>\n            <p>\n              <label>Description:</label>\n              <br />\n              {eventDesc ? eventDesc : \"this event has no summary\"}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal> */}\n    </div>\n  )\n}\n\nexport default GoogleCalendar\n"]},"metadata":{},"sourceType":"module"}