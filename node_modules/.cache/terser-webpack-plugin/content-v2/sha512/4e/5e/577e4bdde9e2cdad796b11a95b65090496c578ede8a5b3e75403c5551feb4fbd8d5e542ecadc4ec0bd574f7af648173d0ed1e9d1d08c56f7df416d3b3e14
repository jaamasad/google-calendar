{"code":"(this[\"webpackJsonpgoogle-calendar-react\"]=this[\"webpackJsonpgoogle-calendar-react\"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},17:function(e,t,n){\"use strict\";n.r(t);var a=n(1),o=n.n(a),c=n(3),i=n.n(c),s=(n(12),n(13),n(5)),r=n(6),l=n(7),d=n(2),u=\"AIzaSyAXTTATGaeYvWKHSiuLd7ucqmHeMxUoX3g\",g=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1];Object(a.useEffect)((function(){var e=document.createElement(\"script\");e.async=!0,e.defer=!0,e.src=\"https://apis.google.com/js/api.js\",document.body.appendChild(e),e.addEventListener(\"load\",(function(){window.gapi&&i()}))}),[]);var c=function(){window.gapi.auth2.authorize({client_id:\"229181458743-7e5rj587bq9qsjr7e7c5ut4kktgunpgt.apps.googleusercontent.com\",scope:\"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\"},(function(e){console.log(e),e&&(console.log(window.gapi.client,e),e.access_token&&localStorage.setItem(\"access_token\",e.access_token),window.gapi.client.load(\"calendar\",\"v3\",p))}))},i=function(){window.gapi.load(\"client:auth2\",g)},g=function(){localStorage.getItem(\"access_token\")?fetch(\"https://www.googleapis.com/calendar/v3/calendars/primary/events?key=\".concat(u,\"&orderBy=startTime&singleEvents=true\"),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))}}).then((function(e){if(401!==e.status)return e.json();localStorage.removeItem(\"access_token\"),c()})).then((function(e){(null===e||void 0===e?void 0:e.items)&&(console.log(e),o(m(e.items)))})):c()},p=function(){window.gapi.client.calendar.events.list({calendarId:\"primary\",showDeleted:!0,singleEvents:!0}).then((function(e){var t=e.result.items;console.log(t),t.length>0&&o(m(t))}))},m=function(e){return e.map((function(e){return{title:e.summary,start:e.start.dateTime||e.start.date,end:e.end.dateTime||e.end.date}}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(\"button\",{onClick:function(){if(window.gapi.client||localStorage.getItem(\"access_token\")){new Date;fetch(\"https://www.googleapis.com/calendar/v3/calendars/primary/events?key=\".concat(u,\"&timeMax=\").concat(new Date(\"Apr 14, 2021\").toISOString(),\"&timeMin=\").concat(new Date(\"Apr 15, 2021\").toISOString()),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))}}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),fetch(\"https://www.googleapis.com/calendar/v3/calendars/primary/events?key=\".concat(u),{method:\"POST\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))},body:JSON.stringify({end:{dateTime:new Date(\"Apr 16, 2021\")},start:{dateTime:new Date(\"Apr 15, 2021\")},summary:\"Test\"})})}},children:\"Add event\"}),Object(d.jsx)(r.a,{plugins:[l.a],initialView:\"dayGridMonth\",events:n})]})};var p=function(){return Object(d.jsx)(\"div\",{className:\"App\",children:Object(d.jsx)(g,{})})};i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(p,{})}),document.getElementById(\"root\"))}},[[17,1,2]]]);","name":"static/js/main.3569e995.chunk.js","map":{"version":3,"sources":["static/js/main.3569e995.chunk.js"],"names":["this","push","12","module","exports","__webpack_require__","13","17","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","main","daygrid_main","jsx_runtime","API_KEY","components_GoogleCalendar","_useState","Object","_useState2","events","setEvents","script","document","createElement","async","defer","src","body","appendChild","addEventListener","window","gapi","handleClientLoad","openSignInPopup","auth2","authorize","client_id","scope","res","console","log","client","access_token","localStorage","setItem","load","listUpcomingEvents","initClient","getItem","fetch","concat","headers","Authorization","then","status","json","removeItem","data","items","formatEvents","calendar","list","calendarId","showDeleted","singleEvents","response","result","length","map","item","title","summary","start","dateTime","date","end","children","onClick","Date","toISOString","method","JSON","stringify","plugins","initialView","src_App","className","a","render","StrictMode","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpgoogle-calendar-react\"] = this[\"webpackJsonpgoogle-calendar-react\"] || []).push([[0],{\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 17:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(3);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/@fullcalendar/react/dist/main.js + 2 modules\nvar main = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/@fullcalendar/daygrid/main.js + 1 modules\nvar daygrid_main = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/components/GoogleCalendar.js\nvar CLIENT_ID=\"229181458743-7e5rj587bq9qsjr7e7c5ut4kktgunpgt.apps.googleusercontent.com\";var API_KEY=\"AIzaSyAXTTATGaeYvWKHSiuLd7ucqmHeMxUoX3g\";// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nvar SCOPES=\"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\";var GoogleCalendar_GoogleCalendar=function GoogleCalendar(){var _useState=Object(react[\"useState\"])(null),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),events=_useState2[0],setEvents=_useState2[1];Object(react[\"useEffect\"])(function(){var script=document.createElement(\"script\");script.async=true;script.defer=true;script.src=\"https://apis.google.com/js/api.js\";document.body.appendChild(script);script.addEventListener(\"load\",function(){if(window.gapi)handleClientLoad();});},[]);var openSignInPopup=function openSignInPopup(){window.gapi.auth2.authorize({client_id:CLIENT_ID,scope:SCOPES},function(res){console.log(res);if(res){console.log(window.gapi.client,res);if(res.access_token)localStorage.setItem(\"access_token\",res.access_token);// fetch(\n//   `https://www.googleapis.com/calendar/v3/users/me/calendarList?access_token=${res.access_token}`\n// )\n//   .then((res) => res.json())\n//   .then((data) =>\n//     localStorage.setItem(\"calendarId\", data.items[0].id)\n//   );\nwindow.gapi.client.load(\"calendar\",\"v3\",listUpcomingEvents);}});};/**\n   *  On load, called to load the auth2 library and API client library.\n   */var handleClientLoad=function handleClientLoad(){window.gapi.load(\"client:auth2\",initClient);};/**\n   *  Initializes the API client library and sets up sign-in state\n   *  listeners.\n   */var initClient=function initClient(){if(!localStorage.getItem(\"access_token\")){openSignInPopup();}else{fetch(\"https://www.googleapis.com/calendar/v3/calendars/primary/events?key=\".concat(API_KEY,\"&orderBy=startTime&singleEvents=true\"),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))}}).then(function(res){if(res.status!==401){return res.json();}else{localStorage.removeItem(\"access_token\");openSignInPopup();}}).then(function(data){if(data===null||data===void 0?void 0:data.items){console.log(data);setEvents(formatEvents(data.items));}});}};/**\n   * Print the summary and start datetime/date of the next ten events in\n   * the authorized user's calendar. If no events are found an\n   * appropriate message is printed.\n   */var listUpcomingEvents=function listUpcomingEvents(){window.gapi.client.calendar.events.list({calendarId:\"primary\",// timeMin: new Date().toISOString(),\nshowDeleted:true,singleEvents:true// maxResults: 10,\n// orderBy: \"startTime\",\n}).then(function(response){var events=response.result.items;console.log(events);if(events.length>0){setEvents(formatEvents(events));}});};var formatEvents=function formatEvents(list){return list.map(function(item){return{title:item.summary,start:item.start.dateTime||item.start.date,end:item.end.dateTime||item.end.date};});};var addEvent=function addEvent(){if(window.gapi.client||localStorage.getItem(\"access_token\")){var today=new Date();fetch(\"https://www.googleapis.com/calendar/v3/calendars/primary/events?key=\".concat(API_KEY,\"&timeMax=\").concat(new Date(\"Apr 14, 2021\").toISOString(),\"&timeMin=\").concat(new Date(\"Apr 15, 2021\").toISOString()),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))}}).then(function(res){return res.json();}).then(function(data){return console.log(data);});fetch(\"https://www.googleapis.com/calendar/v3/calendars/primary/events?key=\".concat(API_KEY),{method:\"POST\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"access_token\"))},body:JSON.stringify({end:{dateTime:new Date(\"Apr 16, 2021\")},start:{dateTime:new Date(\"Apr 15, 2021\")},summary:\"Test\"})});}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:addEvent,children:\"Add event\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(main[\"a\" /* default */],{plugins:[daygrid_main[\"a\" /* default */]],initialView:\"dayGridMonth\",events:events})]});};/* harmony default export */ var components_GoogleCalendar = (GoogleCalendar_GoogleCalendar);\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_GoogleCalendar,{})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[17,1,2]]]);","inputSourceMap":{"version":3,"sources":["/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/node_modules/postcss-loader/src/index.js??postcss!/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/index.css","/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/node_modules/postcss-loader/src/index.js??postcss!/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/App.css","/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/components/GoogleCalendar.js","/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/App.js","/media/jaam/E8BE2D48BE2D109C/my project/google-calendar/src/index.js"],"names":["CLIENT_ID","API_KEY","SCOPES","GoogleCalendar","useState","events","setEvents","useEffect","script","document","createElement","async","defer","src","body","appendChild","addEventListener","window","gapi","handleClientLoad","openSignInPopup","auth2","authorize","client_id","scope","res","console","log","client","access_token","localStorage","setItem","load","listUpcomingEvents","initClient","getItem","fetch","headers","Authorization","then","status","json","removeItem","data","items","formatEvents","calendar","list","calendarId","showDeleted","singleEvents","response","result","length","map","item","title","summary","start","dateTime","date","end","addEvent","today","Date","toISOString","method","JSON","stringify","dayGridPlugin","App","ReactDOM","render","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React, { useEffect, useState } from \"react\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\n\nconst CLIENT_ID =\n  \"229181458743-7e5rj587bq9qsjr7e7c5ut4kktgunpgt.apps.googleusercontent.com\";\nconst API_KEY = \"AIzaSyAXTTATGaeYvWKHSiuLd7ucqmHeMxUoX3g\";\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nconst SCOPES =\n  \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\";\n\nconst GoogleCalendar = () => {\n  const [events, setEvents] = useState(null);\n\n  useEffect(() => {\n    const script = document.createElement(\"script\");\n    script.async = true;\n    script.defer = true;\n    script.src = \"https://apis.google.com/js/api.js\";\n\n    document.body.appendChild(script);\n\n    script.addEventListener(\"load\", () => {\n      if (window.gapi) handleClientLoad();\n    });\n  }, []);\n\n  const openSignInPopup = () => {\n    window.gapi.auth2.authorize(\n      { client_id: CLIENT_ID, scope: SCOPES },\n      (res) => {\n        console.log(res);\n        if (res) {\n          console.log(window.gapi.client, res);\n\n          if (res.access_token)\n            localStorage.setItem(\"access_token\", res.access_token);\n\n          // fetch(\n          //   `https://www.googleapis.com/calendar/v3/users/me/calendarList?access_token=${res.access_token}`\n          // )\n          //   .then((res) => res.json())\n          //   .then((data) =>\n          //     localStorage.setItem(\"calendarId\", data.items[0].id)\n          //   );\n\n          window.gapi.client.load(\"calendar\", \"v3\", listUpcomingEvents);\n        }\n      }\n    );\n  };\n\n  /**\n   *  On load, called to load the auth2 library and API client library.\n   */\n  const handleClientLoad = () => {\n    window.gapi.load(\"client:auth2\", initClient);\n  };\n\n  /**\n   *  Initializes the API client library and sets up sign-in state\n   *  listeners.\n   */\n  const initClient = () => {\n    if (!localStorage.getItem(\"access_token\")) {\n      openSignInPopup();\n    } else {\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&orderBy=startTime&singleEvents=true`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n        }\n      )\n        .then((res) => {\n          if (res.status !== 401) {\n            return res.json();\n          } else {\n            localStorage.removeItem(\"access_token\");\n\n            openSignInPopup();\n          }\n        })\n        .then((data) => {\n          if (data?.items) {\n            console.log(data);\n            setEvents(formatEvents(data.items));\n          }\n        });\n    }\n  };\n\n  /**\n   * Print the summary and start datetime/date of the next ten events in\n   * the authorized user's calendar. If no events are found an\n   * appropriate message is printed.\n   */\n  const listUpcomingEvents = () => {\n    window.gapi.client.calendar.events\n      .list({\n        calendarId: \"primary\",\n        // timeMin: new Date().toISOString(),\n        showDeleted: true,\n        singleEvents: true,\n        // maxResults: 10,\n        // orderBy: \"startTime\",\n      })\n      .then(function (response) {\n        var events = response.result.items;\n\n        console.log(events);\n\n        if (events.length > 0) {\n          setEvents(formatEvents(events));\n        }\n      });\n  };\n\n  const formatEvents = (list) => {\n    return list.map((item) => ({\n      title: item.summary,\n      start: item.start.dateTime || item.start.date,\n      end: item.end.dateTime || item.end.date,\n    }));\n  };\n\n  const addEvent = () => {\n    if (window.gapi.client || localStorage.getItem(\"access_token\")) {\n      let today = new Date();\n\n      fetch(\n        `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}&timeMax=${new Date(\n          \"Apr 14, 2021\"\n        ).toISOString()}&timeMin=${new Date(\"Apr 15, 2021\").toISOString()}`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n          },\n        }\n      )\n        .then((res) => res.json())\n        .then((data) => console.log(data));\n        fetch(\n          `https://www.googleapis.com/calendar/v3/calendars/primary/events?key=${API_KEY}`,\n          {\n            method: \"POST\",\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"access_token\")}`,\n            },\n            body: JSON.stringify({\n              end: {\n                dateTime: new Date(\"Apr 16, 2021\"),\n              },\n              start: {\n                dateTime: new Date(\"Apr 15, 2021\"),\n              },\n              summary: \"Test\",\n            }),\n          }\n        );\n    }\n  };\n\n  return (\n    <>\n      <button onClick={addEvent}>Add event</button>\n      <FullCalendar\n        plugins={[dayGridPlugin]}\n        initialView=\"dayGridMonth\"\n        events={events}\n      />\n    </>\n  );\n};\n\nexport default GoogleCalendar;\n","import \"./App.css\";\nimport GoogleCalendar from \"./components/GoogleCalendar\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GoogleCalendar />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"]}}